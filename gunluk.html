<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artikelfinder</title>
    <style>
        /* CSS stilleri */
        body {
		font-family: Arial, 
		sans-serif; 
		background-color: #f2f2f2; 
		margin: 0; 
		padding: 0;
		}
        .container {
		max-width: 800px; 
		margin: 0 auto; 
		padding: 20px; 
		background-color: #fff; 
		border: 1px solid #ccc; 
		box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.3);
		}
		
        h1, h2 {
		color: #333; 
		text-align: center;
		}
        ul {
		list-style-type: disc; 
		margin: 0; 
		padding: 0 0 0 20px;
		}
        li {
		margin-bottom: 10px;
		}
		.countdown {
		text-align: center; 
		margin-top: 20px; 
		font-size: 18px;
		}
    </style>
</head>
<body>
    <div class="container">
        <h1>Artikelfinder</h1>
		<h1 id="centered-text"></h1>
		<h2 id="articel"></h2>
		<div id="countdown" class="countdown"></div>
    </div>
    <script>
		const centeredText = document.getElementById('centered-text');
		const articel = document.getElementById('articel');
        // JSON dosyasından kelime ve artikel alma fonksiyonu
        async function fetchWords() {
            const response = await fetch('words.json');
            const words = await response.json();
            return words;
        }

        // Günlük kelimeyi seç ve sakla
        async function setDailyWord() {
            const words = await fetchWords();
            const randomWord = words[Math.floor(Math.random() * words.length)];
            const now = new Date();
            const tomorrow = new Date();
            tomorrow.setHours(24, 0, 0, 0); // Gün bitimine kadar olan süreyi hesapla

            // Yeni kelimeyi ve yarınki zaman damgasını localStorage'a kaydet
            localStorage.setItem('dailyWord', JSON.stringify(randomWord));
            localStorage.setItem('nextUpdate', tomorrow.getTime());

            return randomWord;
        }

        // Günlük kelimeyi yükle
        async function loadDailyWord() {
            const nextUpdate = localStorage.getItem('nextUpdate');
            const now = new Date().getTime();

            if (!nextUpdate || now >= nextUpdate) {
                return await setDailyWord();
            } else {
                return JSON.parse(localStorage.getItem('dailyWord'));
            }
        }

        // Sayfaya günlük kelime ve artikel ekleme
        async function displayDailyWord() {
            const word = await loadDailyWord();
			centeredText.textContent = `Aranan Sözcük: ${word.word}`;
			articel.textContent = `Artikeli: ${word.article}`;
            //document.getElementById('daily-word').innerHTML = `<h2>${word.word}</h2><p>${word.article}</p>`;
        }

//geri sayım
        function updateCountdown() {
            const nextUpdate = localStorage.getItem('nextUpdate');
            const now = new Date().getTime();
            const distance = nextUpdate - now;

            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById('countdown').innerHTML = `Yeni kelimeye kalan süre: ${hours} saat, ${minutes} dakika, ${seconds} saniye`;

            // 1 saniye sonra geri sayımı güncelle
            setTimeout(updateCountdown, 1000);
        }

        displayDailyWord();
		updateCountdown();
		
    </script>
</body>
</html>
